package filter;

import java.io.IOException;
import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import org.apache.log4j.Logger;



public class SessionFilter implements Filter {
	
	private static final Logger log = Logger.getLogger(SessionFilter.class);
	FilterConfig fc;

	public void destroy() {

	}
	
	public void doFilter(ServletRequest request, ServletResponse response,FilterChain chain) throws IOException, ServletException {
	
	HttpServletRequest hreq = (HttpServletRequest) request;
	HttpServletResponse hres = (HttpServletResponse) response;
	HttpSession session = hreq.getSession();
	if (session != null && session.getAttribute("sName") != null)
	{
	log.info("获取到session");
	chain.doFilter(request, response);
	}else{
		log.info("不能获取到session");
		   hres.sendRedirect("SessionNull.jsp");
	}
	}

public void init(FilterConfig fc) throws ServletException {
	this.fc = fc;
	}


	}
	